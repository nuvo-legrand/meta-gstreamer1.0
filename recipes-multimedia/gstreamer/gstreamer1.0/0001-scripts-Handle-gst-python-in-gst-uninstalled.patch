From f285526de6119973c97fed4d4f26b17d69d3f8d6 Mon Sep 17 00:00:00 2001
From: Thibault Saunier <tsaunier@gnome.org>
Date: Wed, 24 Sep 2014 10:11:54 +0200
Subject: [PATCH 1/7] scripts: Handle gst-python in gst-uninstalled

https://bugzilla.gnome.org/show_bug.cgi?id=709082
---
 scripts/gst-uninstalled | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/scripts/gst-uninstalled b/scripts/gst-uninstalled
index 361af45..8f9f799 100755
--- a/scripts/gst-uninstalled
+++ b/scripts/gst-uninstalled
@@ -181,8 +181,10 @@ export GST_PLUGIN_SCANNER=$GST/gstreamer/libs/gst/helpers/gst-plugin-scanner
 # this still doesn't make it work for the uninstalled case, since man goes
 # look for a man directory "nearby" instead of the directory I'm telling it to
 export MANPATH=$GST/gstreamer/tools:$GST_PREFIX/share/man:$MANPATH
-pythonver=`python -c "import sys; print (sys.version[:3])"`
-export PYTHONPATH=$GST/gst-python:$GST_PREFIX/lib/python$pythonver/site-packages${PYTHONPATH:+:$PYTHONPATH}
+if [ -z "$PYTHON" ]; then PYTHON="python"; fi
+pythonver=`$PYTHON -c "import sys; print (sys.version[:3])"`
+pythonsites=`$PYTHON -c "import site; print(':'.join(site.getsitepackages()))"`
+export PYTHONPATH="${PYTHONPATH}:${pythonsites}:${GST}/gst-python"
 
 # clutter-gst
 export PKG_CONFIG_PATH=$GST/clutter-gst:$PKG_CONFIG_PATH
-- 
1.8.1.2

